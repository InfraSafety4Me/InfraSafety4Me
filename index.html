<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="Safety4Me">

  <!-- iOS meta tags & icons -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Safety4Me">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">

  <!-- Favicon -->
  <link rel="shortcut icon" type="image/png" href="favicon.png"/>

  <title>Safety4Me</title>
  <link rel="manifest" href="manifest.json">
</head>
<body id="body_id">
  <!-- This script installs service_worker.js to provide PWA functionality to
       application. For more information, see:
       https://developers.google.com/web/fundamentals/primers/service-workers -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function () {
        navigator.serviceWorker.register('flutter_service_worker.js?v=558437995');
      });
    }
  </script>

  <!--Notificações-->
  <script type="text/javascript">
    function requestPermission() {
      if (!('Notification' in window)) {
        alert('Notification API not supported!');
        return;
      }      
      Notification.requestPermission(function (result) {
      });
    }

    function persistentNotification() {
      try {
        navigator.serviceWorker.getRegistration()
          .then((reg) => 
          setTimeout(() => {
            reg.showNotification('Safety4Me', 
              {
                badge: 'icons/Badge-192.png',
                body: 'Você já fez a avaliação do serviço de saúde hoje?',
                icon: 'icons/Icon-192.png',
                vibrate: [200, 100, 200, 100, 200, 100, 200]
              }
            );
          }, 5000))
          .catch((err) => alert('Service Worker registration error: ' + err));
      } catch (err) {
        alert('Notification API error: ' + err);
      }
    }

    requestPermission();
    persistentNotification();
  </script>

  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>

  <!-- TODO: Add SDKs for Firebase products that you want to use
      https://firebase.google.com/docs/web/setup#available-libraries -->
  <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-analytics.js"></script>

  <script>
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional    
    var getUrl = window.location.href;
    if (!getUrl.includes("localhost") && !getUrl.includes("infrasafety4me"))
    {
      var firebaseConfig = {
        apiKey: "AIzaSyDvFIWX-az6YSa0WgTrU0VzvHTdOAyWm34",
        authDomain: "safety4me-d9e2a.firebaseapp.com",
        databaseURL: "https://safety4me-d9e2a.firebaseio.com",
        projectId: "safety4me-d9e2a",
        storageBucket: "safety4me-d9e2a.appspot.com",
        messagingSenderId: "387087321581",
        appId: "1:387087321581:web:1d4ddabd2b756354ff3fe4",
        measurementId: "G-2QMLLYCF0G"
      };
      firebase.initializeApp(firebaseConfig);
      firebase.analytics();
    }
    else{
      var firebaseConfig = {
        apiKey: "1",
        authDomain: "1",
        databaseURL: "1",
        projectId: "1",
        storageBucket: "1",
        messagingSenderId: "1",
        appId: "1",
        measurementId: "1"
      };
      firebase.initializeApp(firebaseConfig);
    }
  </script>

  <!-- <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBWAGG1hdrY_kkzz_MAYhlepuA6DZjqw_c"></script> -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB-rKz-5gyXz7lkMqme-a94NogIpp7Nsd8"></script>
  <script src="main.dart.js?version=37" type="application/javascript"></script>
</body>
</html>
